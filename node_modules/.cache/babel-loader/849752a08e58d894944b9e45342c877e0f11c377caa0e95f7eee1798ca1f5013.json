{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./ChatWindow.css';import MessageBubble from'./MessageBubble';import SendMessageBox from'./SendMessageBox';import{getMessagesByUser}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatWindow=_ref=>{let{chat}=_ref;const[messages,setMessages]=useState([]);useEffect(()=>{const fetchMessages=async()=>{if(!chat)return;try{const res=await getMessagesByUser(chat._id);setMessages(res.data);}catch(err){console.error('Failed to load messages',err);}};fetchMessages();},[chat]);const handleNewMessage=msgObj=>{setMessages(prev=>[...prev,msgObj]);};if(!chat){return/*#__PURE__*/_jsx(\"div\",{className:\"chat-window empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Select a chat to start messaging\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"strong\",{children:chat.name||chat.number})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(MessageBubble,{sender:msg.status==='sent'?'user':'other',text:msg.message,time:new Date(msg.timestamp).toLocaleTimeString()},index))}),/*#__PURE__*/_jsx(SendMessageBox,{chat:chat,onMessageSent:handleNewMessage})]});};export default ChatWindow;","map":{"version":3,"names":["React","useEffect","useState","MessageBubble","SendMessageBox","getMessagesByUser","jsx","_jsx","jsxs","_jsxs","ChatWindow","_ref","chat","messages","setMessages","fetchMessages","res","_id","data","err","console","error","handleNewMessage","msgObj","prev","className","children","name","number","map","msg","index","sender","status","text","message","time","Date","timestamp","toLocaleTimeString","onMessageSent"],"sources":["C:/Users/Dell/Downloads/whatsapp-clone-frontend/src/components/ChatWindow.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './ChatWindow.css';\nimport MessageBubble from './MessageBubble';\nimport SendMessageBox from './SendMessageBox';\nimport { getMessagesByUser } from '../api';\n\nconst ChatWindow = ({ chat }) => {\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      if (!chat) return;\n      try {\n        const res = await getMessagesByUser(chat._id);\n        setMessages(res.data);\n      } catch (err) {\n        console.error('Failed to load messages', err);\n      }\n    };\n\n    fetchMessages();\n  }, [chat]);\n\n  const handleNewMessage = (msgObj) => {\n    setMessages((prev) => [...prev, msgObj]);\n  };\n\n  if (!chat) {\n    return (\n      <div className=\"chat-window empty\">\n        <p>Select a chat to start messaging</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"chat-window\">\n      <div className=\"chat-header\">\n        <strong>{chat.name || chat.number}</strong>\n      </div>\n\n      <div className=\"chat-body\">\n        {messages.map((msg, index) => (\n          <MessageBubble\n            key={index}\n            sender={msg.status === 'sent' ? 'user' : 'other'}\n            text={msg.message}\n            time={new Date(msg.timestamp).toLocaleTimeString()}\n          />\n        ))}\n      </div>\n\n      <SendMessageBox\n        chat={chat}\n        onMessageSent={handleNewMessage}\n      />\n    </div>\n  );\n};\n\nexport default ChatWindow;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,kBAAkB,CACzB,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,iBAAiB,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC1B,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAc,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACH,IAAI,CAAE,OACX,GAAI,CACF,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAX,iBAAiB,CAACO,IAAI,CAACK,GAAG,CAAC,CAC7CH,WAAW,CAACE,GAAG,CAACE,IAAI,CAAC,CACvB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC/C,CACF,CAAC,CAEDJ,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,CAACH,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAU,gBAAgB,CAAIC,MAAM,EAAK,CACnCT,WAAW,CAAEU,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAED,MAAM,CAAC,CAAC,CAC1C,CAAC,CAED,GAAI,CAACX,IAAI,CAAE,CACT,mBACEL,IAAA,QAAKkB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCnB,IAAA,MAAAmB,QAAA,CAAG,kCAAgC,CAAG,CAAC,CACpC,CAAC,CAEV,CAEA,mBACEjB,KAAA,QAAKgB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnB,IAAA,QAAKkB,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BnB,IAAA,WAAAmB,QAAA,CAASd,IAAI,CAACe,IAAI,EAAIf,IAAI,CAACgB,MAAM,CAAS,CAAC,CACxC,CAAC,cAENrB,IAAA,QAAKkB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBb,QAAQ,CAACgB,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACvBxB,IAAA,CAACJ,aAAa,EAEZ6B,MAAM,CAAEF,GAAG,CAACG,MAAM,GAAK,MAAM,CAAG,MAAM,CAAG,OAAQ,CACjDC,IAAI,CAAEJ,GAAG,CAACK,OAAQ,CAClBC,IAAI,CAAE,GAAI,CAAAC,IAAI,CAACP,GAAG,CAACQ,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAE,EAH9CR,KAIN,CACF,CAAC,CACC,CAAC,cAENxB,IAAA,CAACH,cAAc,EACbQ,IAAI,CAAEA,IAAK,CACX4B,aAAa,CAAElB,gBAAiB,CACjC,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAZ,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}